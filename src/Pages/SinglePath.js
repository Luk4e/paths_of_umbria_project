import React, { useEffect, useState } from 'react';
import { Button } from 'react-bootstrap';
import Placeholder from 'react-bootstrap/Placeholder';
import { MapContainer, TileLayer, Marker, Popup, GeoJSON } from 'react-leaflet';
import { useNavigate, useParams } from 'react-router-dom';
import pathsService from '../Services/paths';


const cane = {
  'type': 'FeatureCollection',
  'name': 'tracks',
  'crs': {
    'type': 'name',
    'properties': {
      'name': 'urn:ogc:def:crs:OGC:1.3:CRS84'
    }
  },
  'features': [{
    'type': 'Feature',
    'properties': {
      'name':'Itinerario del Castelliere'
    },
    'geometry': {
      'type': 'MultiLineString',
      'coordinates': [
        [
          [12.890896596, 43.028610207],
          [12.890987959, 43.028756533],
          [12.891110516, 43.02893644],
          [12.891243363, 43.029081234],
          [12.891258337, 43.029115661],
          [12.89129037, 43.029139688],
          [12.891389855, 43.029260478],
          [12.891630665, 43.029507947],
          [12.891785443, 43.029743911],
          [12.891762491, 43.029873356],
          [12.891667454, 43.029944389],
          [12.89153374, 43.029965301],
          [12.891374496, 43.029944959],
          [12.891217629, 43.029933521],
          [12.891265673, 43.030072692],
          [12.891321557, 43.030161514],
          [12.891353628, 43.030231924],
          [12.891384647, 43.030312339],
          [12.891377139, 43.030382853],
          [12.891375875, 43.030452127],
          [12.891371967, 43.030488009],
          [12.891372374, 43.030540733],
          [12.891375129, 43.030599078],
          [12.891384836, 43.030675304],
          [12.891402431, 43.030737314],
          [12.891424685, 43.030841171],
          [12.891471466, 43.030934908],
          [12.891489992, 43.031007947],
          [12.891540506, 43.031062863],
          [12.891582122, 43.031115665],
          [12.891589852, 43.03114851],
          [12.891620639, 43.03125358],
          [12.891616456, 43.031285669],
          [12.891612859, 43.031312227],
          [12.89164179, 43.031391285],
          [12.891721056, 43.031494534],
          [12.891762978, 43.031601754],
          [12.891788364, 43.031670326],
          [12.891801847, 43.031712986],
          [12.89181815, 43.031751933],
          [12.891814514, 43.031797654],
          [12.891830269, 43.03182523],
          [12.891859418, 43.031867711],
          [12.891867925, 43.031966418],
          [12.891867806, 43.032035874],
          [12.891862247, 43.032063377],
          [12.891872033, 43.032114337],
          [12.891904435, 43.032152762],
          [12.891903484, 43.032238386],
          [12.891897086, 43.032295928],
          [12.891904512, 43.032323325],
          [12.891942635, 43.032359043],
          [12.891962382, 43.032389702],
          [12.891960768, 43.032420044],
          [12.891957715, 43.032461833],
          [12.891958254, 43.03249151],
          [12.891956902, 43.032552705],
          [12.891944584, 43.032617648],
          [12.891920804, 43.032677093],
          [12.891917278, 43.032705905],
          [12.891924546, 43.032763334],
          [12.891923237, 43.032791294],
          [12.891905802, 43.032821279],
          [12.891891186, 43.032836611],
          [12.891855613, 43.032841768],
          [12.891829942, 43.03283871],
          [12.891790617, 43.03281992],
          [12.891742602, 43.032792373],
          [12.891719335, 43.032776522],
          [12.891683332, 43.032751757],
          [12.891663046, 43.032751583],
          [12.891639479, 43.032751381],
          [12.891611795, 43.032764333],
          [12.8915975, 43.032790563],
          [12.891578017, 43.03287118],
          [12.891558941, 43.032944563],
          [12.891550431, 43.033000442],
          [12.891535451, 43.03305576],
          [12.891514164, 43.033108291],
          [12.891496959, 43.033139399],
          [12.891483401, 43.033159935],
          [12.891463329, 43.033179952],
          [12.891421135, 43.033196519],
          [12.89136719, 43.033199759],
          [12.891317166, 43.033196949],
          [12.891262016, 43.033175345],
          [12.891220028, 43.033138192],
          [12.891142644, 43.033072997],
          [12.891107649, 43.033022389],
          [12.891075896, 43.032968],
          [12.891031513, 43.03286527],
          [12.89097472, 43.032710792],
          [12.890898984, 43.032556254],
          [12.890871766, 43.032458013],
          [12.890765188, 43.032330711],
          [12.890688361, 43.03221063],
          [12.890610673, 43.032125743],
          [12.890503552, 43.032033853],
          [12.890357535, 43.031935148],
          [12.890251076, 43.031850633],
          [12.890154048, 43.031801609],
          [12.890077126, 43.031794651],
          [12.8899471, 43.03178531],
          [12.889899842, 43.031796432],
          [12.889879732, 43.031826894],
          [12.889883815, 43.031866069],
          [12.889907538, 43.031898261],
          [12.88993943, 43.031956759],
          [12.890003886, 43.032068019],
          [12.890068569, 43.032222413],
          [12.890144482, 43.032386249],
          [12.890237803, 43.032579399],
          [12.890318919, 43.032749655],
          [12.890375374, 43.032882097],
          [12.890470752, 43.033137094],
          [12.890489172, 43.033217823],
          [12.890491796, 43.033230576],
          [12.890512614, 43.033258716],
          [12.890578145, 43.033343118],
          [12.89064149, 43.033463],
          [12.890696239, 43.033604473],
          [12.890734251, 43.033728005],
          [12.890760868, 43.033924237],
          [12.890720479, 43.033775234],
          [12.890660298, 43.033584963],
          [12.89063399, 43.033519489],
          [12.890598067, 43.033428647],
          [12.890495229, 43.033269032],
          [12.890468845, 43.033219927],
          [12.890446179, 43.033113008],
          [12.890382527, 43.032957411],
          [12.890264455, 43.032683266],
          [12.890078293, 43.032282125],
          [12.889980132, 43.032053344],
          [12.889933092, 43.031973831],
          [12.889892781, 43.031900377],
          [12.889869143, 43.031870184],
          [12.889855903, 43.031826104],
          [12.889854957, 43.031803415],
          [12.889870867, 43.031784356],
          [12.889885579, 43.031763044],
          [12.889892566, 43.031743382],
          [12.889885776, 43.031705972],
          [12.889868389, 43.031670326],
          [12.889841846, 43.031613036],
          [12.889760617, 43.031481293],
          [12.889681948, 43.031383034],
          [12.889649445, 43.031344596],
          [12.88954377, 43.031268092],
          [12.889459157, 43.03122734],
          [12.889335551, 43.031199519],
          [12.889242699, 43.031200029],
          [12.88917077, 43.031207426],
          [12.889128646, 43.03120738],
          [12.889093306, 43.031189044],
          [12.889065614, 43.031183765],
          [12.889039206, 43.031179337],
          [12.889012765, 43.031175795],
          [12.888987184, 43.031173962],
          [12.888959882, 43.031172034],
          [12.888925595, 43.031164541],
          [12.888903211, 43.031156534],
          [12.888866348, 43.031132689],
          [12.888832495, 43.031112763],
          [12.888796391, 43.031092058],
          [12.888763084, 43.031061861],
          [12.88872766, 43.031032838],
          [12.888703857, 43.031011345],
          [12.888683972, 43.030990971],
          [12.888665468, 43.030971635],
          [12.88863609, 43.030947983],
          [12.888611787, 43.030932268],
          [12.888591218, 43.030922633],
          [12.88850379, 43.030890442],
          [12.888441925, 43.030879902],
          [12.888383722, 43.030878602],
          [12.888337152, 43.030886528],
          [12.888287297, 43.030903792],
          [12.888187293, 43.030951974],
          [12.888079455, 43.031010021],
          [12.887979664, 43.031065112],
          [12.887884043, 43.031119785],
          [12.887802225, 43.031180327],
          [12.887749667, 43.031225968],
          [12.887710715, 43.031263652],
          [12.887673857, 43.031299945],
          [12.887648371, 43.031334601],
          [12.887617053, 43.031371949],
          [12.887582421, 43.031408993],
          [12.8875591, 43.031424214],
          [12.887530247, 43.031437698],
          [12.887503272, 43.031444621],
          [12.887473834, 43.031448417],
          [12.887446995, 43.031448782],
          [12.887410613, 43.031440865],
          [12.887364796, 43.031427969],
          [12.887282916, 43.031396296],
          [12.88720611, 43.031355531],
          [12.887106196, 43.031310841],
          [12.887038619, 43.031278938],
          [12.886980764, 43.031250043],
          [12.886939721, 43.031237175],
          [12.886872186, 43.031214268],
          [12.886790045, 43.031193583],
          [12.886725856, 43.031172896],
          [12.8866533, 43.031147126],
          [12.886582827, 43.031115645],
          [12.886508458, 43.031078878],
          [12.886441592, 43.031044546],
          [12.886370577, 43.031013656],
          [12.886319724, 43.030992133],
          [12.886266649, 43.030972678],
          [12.886201481, 43.030953534],
          [12.88615722, 43.030947745],
          [12.886106502, 43.030942927],
          [12.88601391, 43.030938566],
          [12.885958509, 43.030936475],
          [12.885906317, 43.030936143],
          [12.885825949, 43.030937929],
          [12.885733456, 43.030945894],
          [12.885630918, 43.030963503],
          [12.885537555, 43.031002264],
          [12.885479974, 43.031036861],
          [12.885410162, 43.031092829],
          [12.885327678, 43.031159881],
          [12.885249999, 43.031217877],
          [12.885179372, 43.031263986],
          [12.885080107, 43.031334776],
          [12.884973126, 43.031412621],
          [12.884892948, 43.031460301],
          [12.884832813, 43.031491964],
          [12.884775147, 43.031508101],
          [12.884737091, 43.031513075],
          [12.884698982, 43.031515127],
          [12.884647439, 43.031516428],
          [12.884611159, 43.031512477],
          [12.884562885, 43.031510627],
          [12.884539255, 43.031511882],
          [12.884503074, 43.031518246],
          [12.884464879, 43.031526243],
          [12.88442954, 43.031534137],
          [12.884362991, 43.031554786],
          [12.884292112, 43.031585314],
          [12.884202472, 43.03162131],
          [12.884097016, 43.031664634],
          [12.884028877, 43.031687332],
          [12.88396013, 43.031707232],
          [12.883918087, 43.031712085],
          [12.883871425, 43.031710851],
          [12.883836551, 43.031705423],
          [12.883800186, 43.031692231],
          [12.883771967, 43.031659817],
          [12.883737537, 43.031612056],
          [12.883695702, 43.031514594],
          [12.883624506, 43.031375812],
          [12.883571375, 43.031289044],
          [12.88351638, 43.031206368],
          [12.883474012, 43.031151495],
          [12.883424257, 43.031096628],
          [12.883374887, 43.031047776],
          [12.883314093, 43.030980666],
          [12.883255116, 43.030912833],
          [12.883209706, 43.030861379],
          [12.883188877, 43.030821879],
          [12.883173597, 43.030789607],
          [12.883165609, 43.030753316],
          [12.883157973, 43.030693826],
          [12.883150031, 43.030644271],
          [12.883137799, 43.030575473],
          [12.883125563, 43.030497791],
          [12.883102186, 43.030440176],
          [12.883081773, 43.030389866],
          [12.883061894, 43.030339147],
          [12.883040701, 43.030293173],
          [12.883013873, 43.030257675],
          [12.882983959, 43.030214072],
          [12.882937545, 43.03016694],
          [12.88281779, 43.030060243],
          [12.882765714, 43.030013768],
          [12.882685955, 43.02992885],
          [12.882593329, 43.029827958],
          [12.882501898, 43.029728577],
          [12.882421932, 43.029654408],
          [12.882371418, 43.029603845],
          [12.88230375, 43.029522292],
          [12.882187696, 43.029391409],
          [12.882043406, 43.029250668],
          [12.881943813, 43.029149776],
          [12.881852618, 43.029057108],
          [12.881799207, 43.029013107],
          [12.881715438, 43.028961795],
          [12.881614919, 43.028886815],
          [12.881571559, 43.028850535],
          [12.881483905, 43.028774193],
          [12.881421939, 43.028685066],
          [12.881354791, 43.028572819],
          [12.881317807, 43.02849228],
          [12.88125241, 43.028366558],
          [12.881181607, 43.028220005],
          [12.881142244, 43.028140063],
          [12.881098646, 43.028069102],
          [12.881039472, 43.027996048],
          [12.880987473, 43.027957388],
          [12.880913272, 43.027894469],
          [12.880835104, 43.027827707],
          [12.880752555, 43.027733071],
          [12.880686018, 43.027666277],
          [12.880627524, 43.027597194],
          [12.88051623, 43.027479918],
          [12.880441059, 43.027415043],
          [12.880387009, 43.027344181],
          [12.880347505, 43.027295143],
          [12.880307097, 43.027244784],
          [12.880258064, 43.027182259],
          [12.880202259, 43.027134357],
          [12.88012634, 43.027080039],
          [12.880001814, 43.026995045],
          [12.879921787, 43.026942372],
          [12.879787283, 43.026863372],
          [12.879651764, 43.026788684],
          [12.879539504, 43.026733337],
          [12.879449542, 43.026690696],
          [12.879380805, 43.026651548],
          [12.87933106, 43.026615959],
          [12.879300229, 43.026587682],
          [12.879278813, 43.026559105],
          [12.879266008, 43.026525905],
          [12.879260312, 43.026492111],
          [12.879262715, 43.026458922],
          [12.879270834, 43.026405574],
          [12.879283794, 43.026355458],
          [12.879295216, 43.026313706],
          [12.879320246, 43.026281287],
          [12.879374911, 43.026237365],
          [12.879505021, 43.026149537],
          [12.879648871, 43.026036975],
          [12.879771079, 43.025949884],
          [12.87986626, 43.025872831],
          [12.880002781, 43.025770176],
          [12.88015187, 43.025659093],
          [12.880276443, 43.025551557],
          [12.880351211, 43.02549144],
          [12.880421623, 43.025426347],
          [12.880483029, 43.025371159],
          [12.880551839, 43.025314446],
          [12.880626833, 43.025269955],
          [12.880711714, 43.025236197],
          [12.880808442, 43.025214475],
          [12.88088664, 43.025198725],
          [12.880969209, 43.025195192],
          [12.881088601, 43.025212619],
          [12.88115899, 43.025236819],
          [12.881379636, 43.025325705],
          [12.881624192, 43.025434716],
          [12.881837172, 43.02550894],
          [12.881943972, 43.025532304],
          [12.882108753, 43.025555638],
          [12.882252196, 43.025558707],
          [12.882373538, 43.025555527],
          [12.882500656, 43.025543092],
          [12.882693097, 43.025528946],
          [12.882817196, 43.025518866],
          [12.882950621, 43.025508543],
          [12.883064554, 43.025482805],
          [12.883193663, 43.025449849],
          [12.883263771, 43.025420722],
          [12.883333862, 43.025391601],
          [12.883397839, 43.02536492],
          [12.883480213, 43.025333218],
          [12.883614308, 43.025279723],
          [12.88381335, 43.025220007],
          [12.883896248, 43.025199673],
          [12.883994793, 43.025181201],
          [12.88410957, 43.02516925],
          [12.884171926, 43.025172154],
          [12.884209989, 43.025187043],
          [12.884245062, 43.025204283],
          [12.88428059, 43.025230596],
          [12.884320812, 43.025288594],
          [12.884403407, 43.025384158],
          [12.884484698, 43.025452533],
          [12.884577677, 43.025504711],
          [12.884654325, 43.025541403],
          [12.884756204, 43.025584279],
          [12.884914307, 43.025632535],
          [12.885446706, 43.025807873],
          [12.885770095, 43.025909006],
          [12.885900608, 43.025958144],
          [12.886044487, 43.026022964],
          [12.886157942, 43.026079469],
          [12.886280334, 43.026154087],
          [12.886389865, 43.026219929],
          [12.886482437, 43.026270994],
          [12.886663431, 43.02635373],
          [12.8868532, 43.02642353],
          [12.887062636, 43.026501862],
          [12.887317742, 43.026572057],
          [12.887525302, 43.02663513],
          [12.887756803, 43.026715392],
          [12.888015969, 43.026840079],
          [12.888276326, 43.02697377],
          [12.888354867, 43.02702034],
          [12.888508863, 43.027138282],
          [12.888649089, 43.027238967],
          [12.888799301, 43.027324717],
          [12.88896634, 43.027400443],
          [12.889276235, 43.027514882],
          [12.889555351, 43.027607219],
          [12.889766398, 43.0276777],
          [12.889916095, 43.027721323],
          [12.890011239, 43.027738757],
          [12.890140263, 43.027755256],
          [12.890174313, 43.027767423],
          [12.890195169, 43.027809415],
          [12.890223842, 43.027935613],
          [12.890231811, 43.02803221],
          [12.890252606, 43.028069246],
          [12.890338814, 43.028187631],
          [12.890503566, 43.028352585],
          [12.89064053, 43.028463202],
          [12.890777281, 43.028556472],
          [12.890869264, 43.02859304],
          [12.890896596, 43.028610207]
        ]
      ]
    }
  }]
};

const SinglePath = () => {
  const [specificPath, setSpecificPath] = useState(null);
  const { pathId } = useParams();
  const navigate = useNavigate();

  const styleDiv = {
    padding: '30px',
    boxShadow: '0px 2.98256px 7.4564px rgba(0, 0, 0, 0.1)',
    margin: '30px 5px 20px 5px',
  };

  useEffect(async () => {
    const tempPathSpec = await pathsService.getOne(pathId);
    setSpecificPath(tempPathSpec);
  },[pathId]);

  const renderPath = () => {
    return(
      <div style={styleDiv}>
        <Button variant='outline-primary' className='float-right' onClick={() => navigate('/paths_a_piedi')}>Torna</Button>
        <h2>{specificPath.title}</h2>
        <br/>
        <h6>[Nome del parco - da aggiungere al database]</h6>
        <h6>[Punto di partenza messo come link che manda a una mappa - da aggiungere al database e se disponibile la posizione
          dare una media della distanza dal punto di partenza in km]</h6>
        <h6>[Meteo con posizione del luogo]</h6>
        <h5>{specificPath.km} Km</h5>
        <h5>{specificPath.duration} h.</h5>
        <h5>{specificPath.differenceAltitude} m.</h5>
        <h5>{specificPath.difficult}</h5>
        <h5>{specificPath.description}</h5>
        <h6>[scaricare pdf e gpx]</h6>
        <h6>[Anello o No - da aggiungere al database]</h6>
        <h6>[Numero dei sentieri - da aggiungere al database]</h6>
        <h6>[Mappa che mostra il percorso]</h6>
        <h6>[utilizzare bootstrap placeholder sia per qui che per la lista di paths]</h6>
        <div style={{ padding: '10% ' }}>
          <MapContainer center={[43.028610207, 12.890896596]} zoom={15} >
            <TileLayer
              attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
              url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
            />
            <GeoJSON data={cane} />
          </MapContainer>
        </div>
      </div>);
  };

  const errorScreen = () => {
    return(
      <div style={styleDiv}>
      </div>);
  };

  return (
    <>
      {specificPath ? renderPath() : errorScreen() }
    </>
  );
};

export default SinglePath;
